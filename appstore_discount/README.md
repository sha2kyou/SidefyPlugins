# AppStore 折扣监控插件

## 描述

监控 App Store 应用价格,当价格低于你配置的原价时在日历中提醒你。非常适合追踪你想要以更低价格购买的应用。

## 功能特性

- 监控不同区域的多个应用
- 自定义原价,实现精准折扣追踪
- 折扣颜色编码(蓝色小折扣、黄色中等、橙色大折扣、红色超大折扣)
- 价格下降时创建日历事件
- 多区域支持(美国、中国、日本、英国等)
- 智能缓存减少 API 调用(每天刷新)
- 完整的国际化支持

## 配置说明

### 必填参数

**app_data**: 应用监控数据

- 格式: `应用ID_区域_原价`
- 示例: `12345_us_68.00,2736473_cn_38.00,9876543_jp_500`
- 多个应用用逗号分隔
- 每个条目必须包含:
  - **应用ID**: App Store 应用的 ID
  - **区域**: 两位字母国家代码 (us, cn, jp, uk等)
  - **原价**: 你知道的原价/常规价格(仅数字,不要货币符号)

## 如何查找应用 ID

1. 打开 App Store 找到你要监控的应用
2. 复制应用的 URL(例如: `https://apps.apple.com/cn/app/example-app/id1234567890`)
3. `id` 后面的数字就是应用 ID(例如: `1234567890`)

## 如何确定原价

由于 iTunes API 不提供折扣信息,你需要手动配置原价:

1. 查看应用在非促销期间的常规价格
2. 或者使用你认为值得购买的"目标价格"
3. 当当前价格低于这个值时,插件会通知你

## 配置示例

```json
{
  "app_data": "1234567890_us_9.99,9876543210_cn_68.00,5555555555_jp_1200"
}
```

这将监控:
- 应用 `1234567890` 在美国区,原价 $9.99
- 应用 `9876543210` 在中国区,原价 ¥68.00
- 应用 `5555555555` 在日本区,原价 ¥1200

## 工作原理

1. 插件每30分钟检查一次配置的应用价格
2. 将当前价格与你配置的原价比较
3. 如果 当前价格 < 原价: 创建带折扣百分比的日历事件
4. 事件包含应用截图(随机选择)、价格详情和 App Store 直达链接
5. 缓存每天过期以确保数据新鲜

## 折扣颜色说明

- 蓝色 (0-24%): 小折扣
- 黄色 (25-49%): 中等折扣
- 橙色 (50-74%): 大折扣
- 红色 (75%+): 超大折扣

## 注意事项

由于 App Store 的 API 限制,我们无法自动获取应用的"官方原价"或"历史最高价"。iTunes API 只提供当前价格,不会告诉我们应用是否正在打折。

因此,你需要:
1. 在应用未打折时记录其常规价格
2. 或者根据自己的购买意愿设定一个"心理价位"
3. 定期检查和更新配置中的原价(如果应用永久降价了)

这种方式虽然需要一些手动操作,但提供了最可靠和准确的折扣追踪。
